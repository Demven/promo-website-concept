/** CARD CONTAINER COMPONENT
  * @author Dmitry Salnikov
  * @since 3/30/2015
 */
@require './base/util'
@require './base/devices'

$card-container-card-width = 40em
$card-container-hide-margin-top = 5em
$card-container-show-margin-top = 0
$card-container-card-margin = 1.6em

$card-container-card-anim-dur = 0.8s
$card-container-card-anim-dur-half = ($card-container-card-anim-dur/2)

$card-container-card-play-button-icon-after()
  content: $icon-code-play
  font-family: $font-icon
  font-size: 7.8em
  position: absolute

ir-card-container
  height: 100%
  width:100%
  display: flex
  flex-wrap: wrap
  justify-content: center
  font-size: 1rem
  padding: 4em
  margin-top: $card-container-hide-margin-top
  opacity: 0
  transition: opacity 1s, margin-top 0.6s
  box-sizing: border-box
  &.show
    opacity: 1
    margin-top: $card-container-show-margin-top
  card
    position: relative
    margin: $card-container-card-margin
    width: $card-container-card-width
    min-width: $card-container-card-width
    background-repeat: no-repeat
    font-family: $font-base
    opacity: 0
    transition: opacity 1s
    cursor: pointer
    cursor: zoom-in
    color: #fff
    img
      width: 100%
    .info-box
      width: 100%
      position: absolute
      bottom: 0 // default placement - bottom of the card
      left: 0
      padding: 2em
      box-sizing: border-box
      text-align: right // default alignment
      background: linear-gradient(to top, rgba(0, 0, 0, 1), rgba(0, 0, 0, 0))
      .title
        text-transform: uppercase
        font-size: 3em
        .thin
          font-weight: 300
        .bold
          font-weight: bold
      .credit
        font-size: 1.5em
        margin-top: 0.2em
        position: relative
        .category
          color: #86a2df
          margin-right: 0.33em
        .divider
          width: 0
          height: 0.2em
          position: absolute
          bottom: -0.7em
          background: #fff
          margin: 0 auto
          transition: width $card-container-card-anim-dur-half, top $card-container-card-anim-dur-half
      &.top-left
        top: 0
        bottom: auto
        text-align: left
        background: linear-gradient(to bottom, rgba(0, 0, 0, 1), rgba(0, 0, 0, 0))
        .credit
          .divider
            left: 0
        & + .description
          text-align: left
      &.top-right
        top: 0
        bottom: auto
        text-align: right
        background: linear-gradient(to bottom, rgba(0, 0, 0, 1), rgba(0, 0, 0, 0))
        .credit
          .divider
            right: 0
        & + .description
          text-align: right
      &.bottom-right
        bottom: 0
        text-align: right
        .credit
          .divider
            right: 0
        & + .description
          text-align: right
      &.bottom-left
        bottom: 0
        text-align: left
        .credit
          .divider
            left: 0
        & + .description
          text-align: left

    &.image
      height: 46em
      background: #c3c3c3
    &.video
      height: 35em
      background: #D7AD86
      .play
        width: 9em
        height: 9em
        position: absolute
        left: 50%
        top: 50%
        transform: translate(-50%,-50%)
        border: 0.5em solid #fff
        border-radius: 50%
        transition: border-color $card-container-card-anim-dur, transform $card-container-card-anim-dur
        &:before
          content: ""
          width: 12em
          height: 12em
          position: absolute
          top: -1.5em
          left: -1.5em
          opacity: 0.5
          transition: opacity $card-container-card-anim-dur
          background: $background-radial-gradient-from-black
          background-size: 12em 12em
        &:after
          $card-container-card-play-button-icon-after()
          top: 0.06em
          left: 0.16em
        &:hover
          cursor: pointer
          border-color: rgba(165, 182, 218, 0.3)
          transform: scale(1.2) translate(-40%, -40%)
          &:before
            opacity: 0
    &.audio
      height: 0.41*$card-container-card-width
      background: linear-gradient(to top, #677fad, ($color-base))
      .info-box
        background: none
        .credit
          .category
            color: #a4c1ff
      .play
        width: 9em
        height: 9em
        position: absolute
        left: 0
        top: 0
        &:after
          $card-container-card-play-button-icon-after()
          top: 0.08em
          left: 0.1em
          transition: transform $card-container-card-anim-dur-half
        &:hover
          cursor: pointer
          &:after
            transform: scale(1.2)
      .time
        position: absolute
        top: 1.55em
        right: 0.95em
        font-size: 2.2em
      .soundgraph
        position: absolute
        height: 7em
        width: 22em
        top: 1em
        left: 9em
        display: flex
        align-items: center
        justify-content: space-between
        &:before
          content: ''
          width: 100%
          height: 0.25em
          position: absolute
          top: 50%
          margin-top: -0.125em
          background: #fff
        .segment
          height: 100%
          width: 0.46em
          background: #fff
    &.show
      opacity: 1
    &.has-description
      .info-box
        transition: padding $card-container-card-anim-dur-half
        &.top-left,
        &.top-right
          .credit
            position: static
            .divider
              right: 5%
              top: 1em
              bottom: initial
          & + .description
            top: 0
            padding: 1.33em 1.33em 3em
      .description
        height: 8em
        font-size: 1.5em
        font-weight: normal
        opacity: 0
        box-sizing: border-box
        position: absolute
        bottom: -3.66em
        left: 0
        padding: 3em 1.33em 1.33em
        text-align: right
    &:hover
      box-shadow: 0 0 1em 0 rgba(0, 0, 0, 0.5)
      .info-box
        &.bottom-left,
        &.bottom-right
        .credit
          .divider
            width: 100%
      &.has-description
        .info-box
          &.bottom-left,
          &.bottom-right
            padding-bottom: 10em
          &.top-left,
          &.top-right
            padding-top: 10em
            .credit
              .divider
                width: 90%
                top: 5.7em
        .description
          opacity: 1
          transition: opacity $card-container-card-anim-dur .1s,bottom $card-container-card-anim-dur-half
          bottom: 0

/* TABLET STYLES */
@media $tablet-any
  ir-card-container
    font-size: 1rem
    padding: 2em

/* MOBILE STYLES */
@media $mobile
  ir-card-container
    font-size: 0.8rem
    padding: 1em
