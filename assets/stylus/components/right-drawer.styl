/** RIGHT DRAWER COMPONENT
  * @author Dmitry Salnikov
  * @since 3/14/2015
 */
@require './base/util'
@require './base/devices'

$right-drawer-base-font-size = 1rem // Desktop
$right-drawer-tile-size = 12.6em
$right-drawer-tile-delay = 80ms
$right-drawer-tile-bell-icon-size = 9.0em
$right-drawer-tile-text-icon-size = 6.4em
$right-drawer-tile-text-icon-shift-up = 0.5em
$right-drawer-dragger-height = 8em
$right-drawer-dragger-width = 1.4em
$right-drawer-dragger-dot-size = 0.5em

$right-drawer-dragger-color = #9a9a9a
$right-drawer-dragger-hover-color = #888

ir-right-drawer
  width: $right-drawer-tile-size
  height: 100%
  background: $color-base-dark
  position: fixed
  top: 0
  right: 0
  font-size: $right-drawer-base-font-size
  display: flex
  flex-direction: row
  transform: translateX($right-drawer-tile-size)
  transition: transform $drawer-open-anim-dur
  nav
    width: 100%
    height: 100%
    display: flex
    flex-direction: column
    box-shadow: 8px 0 10px -3px #000 inset

    nav-tile-icon-before(url, size, shiftUp = 0)
      &:before
        content: ''
        width: size
        height: size
        position: absolute
        top: 50%
        right: 50%
        margin-top: -(size/2) - shiftUp
        margin-right: -(size/2)
        display: block
        background: url(url) no-repeat
        background-size: size size

    figure.tile
      width: $right-drawer-tile-size
      height: $right-drawer-tile-size
      position: relative
      transform: translateX($right-drawer-tile-size)
      transition: transform $drawer-open-anim-dur
      figcaption
        width: 100%
        position: absolute
        bottom: 1em
        font-family: $font-base
        font-size: 1.3em
        color: #cdcdcd
        text-transform: uppercase
        text-align: center
        opacity: 0
        transition: opacity $drawer-open-anim-dur*2
        transition-delay: $drawer-open-anim-dur
      &:hover
        cursor: pointer
        figcaption
          color: #fff;
      &.avatar
        nav-tile-icon-before("http://fotohost.by/images/2015/03/04/avatar-orange-hair.png", $right-drawer-tile-bell-icon-size)
        &:before
          border-radius: 0.8em
          box-shadow: 0 0 2px 0 #000
        &:hover
          &:before
            box-shadow: 0 0 6px 0 #000
        figcaption
          display: none
      &.gallery
        transition-delay: $right-drawer-tile-delay
        nav-tile-icon-before("http://fotohost.by/images/2015/03/04/gallery.png", $right-drawer-tile-text-icon-size, $right-drawer-tile-text-icon-shift-up)
      &.people
        transition-delay: $right-drawer-tile-delay * 2
        nav-tile-icon-before("http://fotohost.by/images/2015/03/04/people.png", $right-drawer-tile-text-icon-size, $right-drawer-tile-text-icon-shift-up)
      &.analytics
        transition-delay: $right-drawer-tile-delay * 3
        nav-tile-icon-before("http://fotohost.by/images/2015/03/04/analytics.png", $right-drawer-tile-text-icon-size, $right-drawer-tile-text-icon-shift-up)

  .dragger
    height: $right-drawer-dragger-height
    width: $right-drawer-dragger-width
    position: absolute
    top: 50%
    left: -($right-drawer-dragger-width)
    padding-top: 1.2em
    margin-top: -($right-drawer-dragger-height/2)
    background: $right-drawer-dragger-color
    border-radius: $right-drawer-dragger-width 0 0 $right-drawer-dragger-width
    display: flex
    flex-direction: column
    box-sizing: border-box
    cursor: pointer
    div
      width: $right-drawer-dragger-dot-size
      height: $right-drawer-dragger-dot-size
      margin: $right-drawer-dragger-dot-size*2 0 0 $right-drawer-dragger-dot-size
      background: #fff
      border-radius: $right-drawer-dragger-dot-size/2
    &:hover
      background: $right-drawer-dragger-hover-color
    &:after
      content: ''
      width: $right-drawer-dragger-width + 3.6em
      height: $right-drawer-dragger-height*3
      position: absolute
      top: -($right-drawer-dragger-height)
      right: 0

  &.open
    transform: translateX(0)
    nav
      figure.tile
        transform: translateX(0)
        figcaption
          opacity: 1

  &.opposite-drawer-open
    transform: translateX($right-drawer-tile-size*2)

/* MOBILE STYLES */
@media $mobile
  ir-right-drawer
    .dragger
      opacity: 0
      transition: opacity $drawer-open-anim-dur
    &.open
      width: $drawer-mobile-width
      font-size: $right-drawer-base-font-size
      nav
        figure.tile
          figcaption
            width: 120%
            top: 1em
            right: 6.3em
            text-align: right
            line-height: 1.1em
            font-size: 2em
            display: flex !important
            flex-direction: column
            justify-content: center

      .dragger
        width: 100%
        height: 120%
        top: 0
        background: #000
        opacity: 0.5
        div
          background: none
